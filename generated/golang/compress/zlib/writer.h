// generated by GoCpp from file '$(ImportDir)/compress/zlib/writer.go'
#pragma once

#include <functional>
#include <string>
#include <tuple>
#include <vector>

#include "golang/compress/zlib/writer.fwd.h"
#include "gocpp/support.h"

#include "golang/compress/flate/deflate.h"
#include "golang/encoding/binary/binary.h"
#include "golang/fmt/errors.h"
#include "golang/hash/adler32/adler32.h"
#include "golang/hash/hash.h"
#include "golang/io/io.h"

namespace golang::zlib
{
    extern int NoCompression;
    extern int BestSpeed;
    extern int BestCompression;
    extern int DefaultCompression;
    extern int HuffmanOnly;
    struct Writer
    {
        io::Writer w;
        int level;
        gocpp::slice<unsigned char> dict;
        flate::Writer* compressor;
        hash::Hash32 digest;
        std::string err;
        gocpp::array<unsigned char, 4> scratch;
        bool wroteHeader;

        using isGoStruct = void;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const Writer& value);
    Writer* NewWriter(io::Writer w);
    std::tuple<Writer*, std::string> NewWriterLevel(io::Writer w, int level);
    std::tuple<Writer*, std::string> NewWriterLevelDict(io::Writer w, int level, gocpp::slice<unsigned char> dict);
    void Reset(Writer* z, io::Writer w);
    std::string writeHeader(Writer* z);
    std::tuple<int, std::string> Write(Writer* z, gocpp::slice<unsigned char> p);
    std::string Flush(Writer* z);
    std::string Close(Writer* z);
}

