// generated by GoCpp from file '$(ImportDir)/runtime/mranges.go'
#pragma once

#include <functional>
#include <string>
#include <tuple>
#include <vector>

#include "golang/runtime/mranges.fwd.h"
#include "gocpp/support.h"

#include "golang/runtime/internal/atomic/types.h"
#include "golang/runtime/mstats.h"

namespace golang::runtime
{
    struct addrRange makeAddrRange(uintptr_t base, uintptr_t limit);
    struct offAddr
    {
        uintptr_t a;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct offAddr& value);
    struct atomicOffAddr
    {
        atomic::Int64 a;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct atomicOffAddr& value);
    struct addrRange
    {
        offAddr base;
        offAddr limit;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct addrRange& value);
    extern offAddr minOffAddr;
    extern offAddr maxOffAddr;
    struct addrRanges
    {
        gocpp::slice<addrRange> ranges;
        uintptr_t totalBytes;
        golang::runtime::sysMemStat* sysStat;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct addrRanges& value);

    namespace rec
    {
        uintptr_t size(golang::runtime::addrRange a);
        bool contains(golang::runtime::addrRange a, uintptr_t addr);
        struct addrRange subtract(golang::runtime::addrRange a, struct addrRange b);
        std::tuple<uintptr_t, bool> takeFromFront(golang::runtime::addrRange* a, uintptr_t len, uint8_t align);
        std::tuple<uintptr_t, bool> takeFromBack(golang::runtime::addrRange* a, uintptr_t len, uint8_t align);
        struct addrRange removeGreaterEqual(golang::runtime::addrRange a, uintptr_t addr);
        struct offAddr add(golang::runtime::offAddr l, uintptr_t bytes);
        struct offAddr sub(golang::runtime::offAddr l, uintptr_t bytes);
        uintptr_t diff(golang::runtime::offAddr l1, struct offAddr l2);
        bool lessThan(golang::runtime::offAddr l1, struct offAddr l2);
        bool lessEqual(golang::runtime::offAddr l1, struct offAddr l2);
        bool equal(golang::runtime::offAddr l1, struct offAddr l2);
        uintptr_t addr(golang::runtime::offAddr l);
        void Clear(golang::runtime::atomicOffAddr* b);
        void StoreMin(golang::runtime::atomicOffAddr* b, uintptr_t addr);
        void StoreUnmark(golang::runtime::atomicOffAddr* b, uintptr_t markedAddr, uintptr_t newAddr);
        void StoreMarked(golang::runtime::atomicOffAddr* b, uintptr_t addr);
        std::tuple<uintptr_t, bool> Load(golang::runtime::atomicOffAddr* b);
        void init(golang::runtime::addrRanges* a, golang::runtime::sysMemStat* sysStat);
        int findSucc(golang::runtime::addrRanges* a, uintptr_t addr);
        std::tuple<uintptr_t, bool> findAddrGreaterEqual(golang::runtime::addrRanges* a, uintptr_t addr);
        bool contains(golang::runtime::addrRanges* a, uintptr_t addr);
        void add(golang::runtime::addrRanges* a, struct addrRange r);
        struct addrRange removeLast(golang::runtime::addrRanges* a, uintptr_t nBytes);
        void removeGreaterEqual(golang::runtime::addrRanges* a, uintptr_t addr);
        void cloneInto(golang::runtime::addrRanges* a, struct addrRanges* b);
    }
}

