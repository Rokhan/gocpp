// generated by GoCpp from file '$(ImportDir)/bufio/bufio.go'
#pragma once

#include <functional>
#include <string>
#include <tuple>
#include <vector>

#include "golang/bufio/bufio.fwd.h"
#include "gocpp/support.h"

#include "golang/io/io.h"

namespace golang::bufio
{
    extern gocpp::error ErrInvalidUnreadByte;
    extern gocpp::error ErrInvalidUnreadRune;
    extern gocpp::error ErrBufferFull;
    extern gocpp::error ErrNegativeCount;
    struct Reader
    {
        gocpp::slice<unsigned char> buf;
        io::Reader rd;
        int r;
        int w;
        gocpp::error err;
        int lastByte;
        int lastRuneSize;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct Reader& value);
    struct Reader* NewReaderSize(io::Reader rd, int size);
    struct Reader* NewReader(io::Reader rd);
    extern gocpp::error errNegativeRead;
    extern gocpp::error errNegativeWrite;
    struct Writer
    {
        gocpp::error err;
        gocpp::slice<unsigned char> buf;
        int n;
        io::Writer wr;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct Writer& value);
    struct Writer* NewWriterSize(io::Writer w, int size);
    struct Writer* NewWriter(io::Writer w);
    struct ReadWriter
    {
        Reader* Reader;
        Writer* Writer;

        using isGoStruct = void;

        template<typename T> requires gocpp::GoStruct<T>
        operator T();

        template<typename T> requires gocpp::GoStruct<T>
        bool operator==(const T& ref) const;

        std::ostream& PrintTo(std::ostream& os) const;
    };

    std::ostream& operator<<(std::ostream& os, const struct ReadWriter& value);
    struct ReadWriter* NewReadWriter(struct Reader* r, struct Writer* w);

    namespace rec
    {
        int Size(golang::bufio::Reader* b);
        void Reset(golang::bufio::Reader* b, io::Reader r);
        void reset(golang::bufio::Reader* b, gocpp::slice<unsigned char> buf, io::Reader r);
        void fill(golang::bufio::Reader* b);
        struct gocpp::error readErr(golang::bufio::Reader* b);
        std::tuple<gocpp::slice<unsigned char>, struct gocpp::error> Peek(golang::bufio::Reader* b, int n);
        std::tuple<int, struct gocpp::error> Discard(golang::bufio::Reader* b, int n);
        std::tuple<int, struct gocpp::error> Read(golang::bufio::Reader* b, gocpp::slice<unsigned char> p);
        std::tuple<unsigned char, struct gocpp::error> ReadByte(golang::bufio::Reader* b);
        struct gocpp::error UnreadByte(golang::bufio::Reader* b);
        std::tuple<gocpp::rune, int, struct gocpp::error> ReadRune(golang::bufio::Reader* b);
        struct gocpp::error UnreadRune(golang::bufio::Reader* b);
        int Buffered(golang::bufio::Reader* b);
        std::tuple<gocpp::slice<unsigned char>, struct gocpp::error> ReadSlice(golang::bufio::Reader* b, unsigned char delim);
        std::tuple<gocpp::slice<unsigned char>, bool, struct gocpp::error> ReadLine(golang::bufio::Reader* b);
        std::tuple<gocpp::slice<gocpp::slice<unsigned char>>, gocpp::slice<unsigned char>, int, struct gocpp::error> collectFragments(golang::bufio::Reader* b, unsigned char delim);
        std::tuple<gocpp::slice<unsigned char>, struct gocpp::error> ReadBytes(golang::bufio::Reader* b, unsigned char delim);
        std::tuple<gocpp::string, struct gocpp::error> ReadString(golang::bufio::Reader* b, unsigned char delim);
        std::tuple<int64_t, struct gocpp::error> WriteTo(golang::bufio::Reader* b, io::Writer w);
        std::tuple<int64_t, struct gocpp::error> writeBuf(golang::bufio::Reader* b, io::Writer w);
        int Size(golang::bufio::Writer* b);
        void Reset(golang::bufio::Writer* b, io::Writer w);
        struct gocpp::error Flush(golang::bufio::Writer* b);
        int Available(golang::bufio::Writer* b);
        gocpp::slice<unsigned char> AvailableBuffer(golang::bufio::Writer* b);
        int Buffered(golang::bufio::Writer* b);
        std::tuple<int, struct gocpp::error> Write(golang::bufio::Writer* b, gocpp::slice<unsigned char> p);
        struct gocpp::error WriteByte(golang::bufio::Writer* b, unsigned char c);
        std::tuple<int, struct gocpp::error> WriteRune(golang::bufio::Writer* b, gocpp::rune r);
        std::tuple<int, struct gocpp::error> WriteString(golang::bufio::Writer* b, gocpp::string s);
        std::tuple<int64_t, struct gocpp::error> ReadFrom(golang::bufio::Writer* b, io::Reader r);
    }
}

